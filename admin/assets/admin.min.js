jQuery(document).ready((function($){let closeAllPanels=()=>{jQuery(document).find(".gridmaster-responsive-fields-devices-wrap.open").removeClass("open").find(".gridmaster-responsive-fields-devices").hide()},breakpoints=gridmaster_params.breakpoints;jQuery(document).on("click",".gm-slide-toggle .postbox-header",(function(e){jQuery(this).parent().toggleClass("closed").find(".inside").slideToggle("fast")})),jQuery(document).on("click",".gridmaster-responsive-fields-selected-devices",(function(e){closeAllPanels(),jQuery(this).parent().toggleClass("open").find(".gridmaster-responsive-fields-devices").slideToggle("fast")})),jQuery(document).on("click",".gridmaster-responsive-fields-device",(function(e){let $this=jQuery(this),device=$this.attr("data-device");jQuery(".gridmaster-responsive-fields-device").removeClass("selected"),jQuery(".gridmaster-responsive-fields-content .responsive-field").removeClass("hidden").hide(),jQuery('.gridmaster-responsive-fields-device[data-device="'+device+'"]').addClass("selected"),jQuery(".gridmaster-responsive-fields").find(".gridmaster-input-"+device).removeClass("hidden").fadeIn("fast"),jQuery(".gridmaster-responsive-fields-selected-devices").html($this.html()),closeAllPanels();let iframeWidth=breakpoints[device].value;iframeWidth=parseInt(iframeWidth)+32,jQuery("#gm-iframe").css("width",iframeWidth+"px")}));jQuery(document).on("change","#gm-shortcode-generator select, #gm-shortcode-generator input:not(.skip-reload)",(function(e){"taxonomy"==jQuery(this).attr("id")&&(()=>{let $val=jQuery("#taxonomy").val(),inpDisabled="";gridmaster_params.has_pro||"category"==$val?jQuery("#terms_field").removeClass("gm-pro-field"):(jQuery("#terms_field").addClass("gm-pro-field"),inpDisabled=" disabled ");let terms=window.gm_terms[$val],html="",options='<option value="">All - Default</option><option value="auto">Auto Select</option>';terms&&0!=terms.length?jQuery.each(terms,(function(term_id,term_name){html+='<span class="gm-checkbox-wrapper"><input type="checkbox" class="input-radio " value="'+term_id+'" name="terms" id="terms_'+term_id+'" '+inpDisabled+'><label for="terms_'+term_id+'" class="radio gm-field-label">'+term_name+"</label></span>",options+='<option value="'+term_id+'">'+term_name+"</option>"})):html="<i>No Terms Found</i>",jQuery("#terms_field .gridmaster-input-wrapper").html(html),jQuery("#initial_term").html(options)})();let $fields=jQuery("#gm-shortcode-generator").serializeArray(),responsiveFields=[],terms=[],sliderOptions={},shortCode="[gridmaster";jQuery.each($fields,(function(i,field){let fieldName=field.name,fieldVal=field.value,$thisField=jQuery('#gm-shortcode-generator [name="'+fieldName+'"]');if(!$thisField.hasClass("gm-ignore-field"))if($thisField.hasClass("responsive-field")){let dataName=$thisField.attr("data-name");responsiveFields.push(dataName)}else if(fieldVal){if("terms"==fieldName)return void terms.push(fieldVal);if(fieldName.startsWith("slider_"))return void(sliderOptions[fieldName.substring(7)]=fieldVal);shortCode+=" "+fieldName+'="'+fieldVal+'"'}})),terms.length&&(shortCode+=' terms="'+terms.join(",")+'"'),responsiveFields=[...new Set(responsiveFields)],jQuery.each(responsiveFields,(function(i,resFieldId){let fieldValArr=jQuery('#gm-shortcode-generator [data-name="'+resFieldId+'"]').serializeArray(),valObj={};jQuery.each(fieldValArr,(function(i,field){let fieldName=field.name,fieldVal=field.value,device=fieldName.replace(resFieldId+"[","").replace("]","");valObj[device]=fieldVal}));let valObjStr=JSON.stringify(valObj);resFieldId.startsWith("slider_")?sliderOptions[resFieldId.substring(7)]=valObj:valObjStr&&(shortCode+=" "+resFieldId+"='"+valObjStr+"'")})),shortCode+=" slider_args='"+JSON.stringify(sliderOptions)+"'",shortCode+="]",jQuery(".gm-copy-inp").val(shortCode),console.log(shortCode),jQuery(".gm-iframe-wrap").addClass("loading"),jQuery("#gm-iframe").attr("src",gridmaster_params.home_url+"?gm_shortcode_preview=1&shortcode="+encodeURIComponent(shortCode))})),jQuery(document).on("click",".gm-copy-btn",(function(e){jQuery(this).closest(".gm-copy-wrap").find(".gm-copy-val").select(),document.execCommand("copy")})),jQuery(document).on("click",".gm-toggle-modal",(function(e){let modalId=jQuery(this).attr("data-modal-id");jQuery("#"+modalId).fadeIn("fast")})),jQuery(document).on("click",".gm-modal-close",(function(e){jQuery(this).closest(".gm-modal-wrap").fadeOut("fast")})),jQuery(document).on("change","#filter_style",(function(e){let $val=jQuery(this).val();if(jQuery(".filter-demo-link-button").hide().html(""),gridmaster_params.filter_demo_links[$val]){let link=`<a href="${gridmaster_params.demo_link+gridmaster_params.filter_demo_links[$val]}" target="_blank" class="align-items-center button button-secondary d-inline-flex"><span class="me-2 dashicons dashicons-external"></span>View Demo</a>`;jQuery(".filter-demo-link-button").html(link).fadeIn("fast")}})),jQuery(document).on("change","#grid_style",(function(e){let $val=jQuery(this).val();if(jQuery(".grid-demo-link-button").hide().html(""),gridmaster_params.grid_demo_links[$val]){let link=`<a href="${gridmaster_params.demo_link+gridmaster_params.grid_demo_links[$val]}" target="_blank" class="align-items-center button button-secondary d-inline-flex"><span class="me-2 dashicons dashicons-external"></span>View Demo</a>`;jQuery(".grid-demo-link-button").html(link).fadeIn("fast")}})),jQuery(document).on("change",'.gridmaster-input-wrapper select, .gridmaster-input-wrapper input[type="radio"]',(function(e){let $val=jQuery(this).val(),$id=jQuery(this).attr("name");jQuery('div[class^="show-if-'+$id+'"]').hide(),jQuery(".show-if-"+$id+"-"+$val).fadeIn("fast")})),jQuery(document).on("change",'[name="link_thumbnail"]',(function(e){let $val=jQuery(this).val();jQuery(".show-if-link_thumbnail-yes").hide(),jQuery(".show-if-link_thumbnail-"+$val).fadeIn("fast")})),jQuery(document).on("click",".gm-save-grid",(function(e){jQuery("#gm-shortcode-generator").submit()}));let noticeTimeout=!1;jQuery(document).on("submit",".gm-ajax-form",(function(e){e.preventDefault();let $form=jQuery(this),$data=$form.serialize();$form.find('[type="submit"]').attr("disabled","disabled"),$form.find(".spinner").addClass("is-active"),$form.find(".gm-ajax-response").html(""),noticeTimeout&&clearTimeout(noticeTimeout),jQuery.ajax({type:"POST",url:ajaxurl,data:$data,dataType:"json",success:function(response){$form.find('[type="submit"]').removeAttr("disabled"),response.success?$form.find(".gm-ajax-response").html('<div class="notice notice-success is-dismissible"><p>'+response.data.message+"</p></div>"):$form.find(".gm-ajax-response").html('<div class="notice notice-error is-dismissible"><p>'+response.data.message+"</p></div>")},error:function(response){$form.find('[type="submit"]').removeAttr("disabled"),$form.find(".gm-ajax-response").html('<div class="notice notice-error is-dismissible"><p>Something went wrong. Please try again.</p></div>')},complete:function(response){$form.find(".spinner").removeClass("is-active"),jQuery(document).trigger("wp-updates-notice-added"),noticeTimeout=setTimeout((function(){$form.find(".gm-ajax-response .notice").fadeOut("fast")}),5e3)}})})),gridmaster_params.has_pro||jQuery(".gm-pro-inp-disable input").attr("disabled","disabled")}));