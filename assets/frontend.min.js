jQuery(document).ready((function($){jQuery(document).on("change",".gm-taxonomy-item input",(function(){let $this=jQuery(this);$this.attr("data_id");asr_ajax_get_postdata("",$this)})),jQuery(document).on("click",".am_posts_navigation_init a.page-numbers, .am-post-grid-load-more",(function(e){e.preventDefault();let $this=jQuery(this);var paged=$this.text(),loadMore=!1;if($this.hasClass("am-post-grid-load-more"))paged=$this.data("next"),loadMore=!0;else if($this.hasClass("next")){let currentPage=$this.closest(".am_posts_navigation_init").find(".page-numbers.current").text();paged=parseInt(currentPage)+1}else if($this.hasClass("prev")){let currentPage=$this.closest(".am_posts_navigation_init").find(".page-numbers.current").text();paged=parseInt(currentPage)-1}var theSelector=$this.closest(".am_ajax_post_grid_wrap").find(".asr_texonomy"),activeSelector=$this.closest(".am_ajax_post_grid_wrap").find(".asr_texonomy.active");activeSelector.length>0?activeSelector.attr("data_id"):activeSelector=theSelector,asr_ajax_get_postdata("-1",$this,paged,loadMore)})),jQuery(document).on("change",".gm-taxonomy-item.gm-taxonomy-all input",(function(e){let $this=jQuery(this);$this.is(":checked")&&$this.closest(".gm-taxonomy-item").siblings().find("input").prop("checked",!1)})),jQuery(document).on("change",".gm-taxonomy-item:not(.gm-taxonomy-all) input",(function(e){let $this=jQuery(this),$all=$this.closest(".gm-taxonomy-item").siblings(".gm-taxonomy-all").find("input");$this.is(":checked")&&$all.prop("checked",!1)}));var flag=!1;function asr_ajax_get_postdata(term_ID,selector,paged,loadMore){let $wrapper=jQuery(selector).closest(".am_ajax_post_grid_wrap"),getLayout=$wrapper.find(".asr-filter-div").attr("data-layout"),pagination_type=$wrapper.attr("data-pagination_type"),jsonData=$wrapper.attr("data-am_ajax_post_grid"),taxInput=$wrapper.find(".gm-taxonomy-item input:checked").serialize(),$args=JSON.parse(jsonData),enableSlider=$args.enable_slider,data={action:"asr_filter_posts",asr_ajax_nonce:asr_ajax_params.asr_ajax_nonce,term_ID:term_ID,taxInput:taxInput,layout:getLayout||"1",argsArray:$args,pagination_type:pagination_type,loadMore:loadMore};paged&&(data.paged=paged),$.ajax({type:"post",url:asr_ajax_params.asr_ajax_url,data:data,beforeSend:function(data){loadMore?($wrapper.find(".am-post-grid-load-more").addClass("loading"),flag=!0):$wrapper.find(".asr-loader").show()},complete:function(data){loadMore?$wrapper.find(".am-post-grid-load-more").removeClass("loading"):$wrapper.find(".asr-loader").hide()},success:function(data){if(loadMore){var newPosts=jQuery(".am_post_grid",data).html(),newPagination=jQuery(".am_posts_navigation",data).html();$wrapper.find(".asrafp-filter-result .am_posts_navigation").html(newPagination),asr_ajax_params.is_pro&&enableSlider?$wrapper.find(".am_post_grid").hasClass("slick-initialized")?$wrapper.find(".am_post_grid").slick("slickAdd",newPosts):($wrapper.find(".asrafp-filter-result .am_post_grid").append(newPosts),jQuery(document).trigger("gridmaster_init_slider",[$wrapper,$args])):$wrapper.find(".asrafp-filter-result .am_post_grid").append(newPosts)}else $wrapper.find(".asrafp-filter-result").html(data);asr_ajax_params.is_pro&&enableSlider&&jQuery(document).trigger("gridmaster_init_all_sliders"),flag=!1,jQuery(window).trigger("scroll"),"true"==$args.animation&&$wrapper.find(".am_grid_col").slideDown(),loadMore||jQuery("html, body").animate({scrollTop:$wrapper.offset().top-80},400)},error:function(data){alert("Cannot load the Post Grid.")}})}jQuery(document).on("am_ajax_post_grid_init",(function(){jQuery(".am_ajax_post_grid_wrap").each((function(i,el){var amPGdata=jQuery(this).data("am_ajax_post_grid");amPGdata&&amPGdata.initial&&asr_ajax_get_postdata(amPGdata.initial,jQuery(this).find(".asr-ajax-container"))}))})),jQuery(window).on("scroll",(function(e){jQuery(".infinite_scroll.am-post-grid-load-more").each((function(i,el){!1===flag&&function(el,pixelsBeforeInview=0){var rect=el.getBoundingClientRect();return rect.top>=-pixelsBeforeInview&&rect.left>=-pixelsBeforeInview&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)+pixelsBeforeInview&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)+pixelsBeforeInview}(el,1e3)?(console.log("inview"),jQuery(el).trigger("click")):console.log("outview")}))}))})),window.addEventListener("load",(event=>{jQuery(".am_grid_col").slideDown(),jQuery(window).trigger("scroll")}));